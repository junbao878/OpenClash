(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"5JRb":function(e,t,a){e.exports={labeledInput:"_1h4Qixiwxj"}},D46e:function(e,t,a){e.exports={header:"_3PCSxT0l14",list:"_1yYRIyvlRd",proxy:"_1OcDlvlM5R",proxySelectable:"_3oAxPKtZFv"}},FWZb:function(e,t,a){e.exports={proxy:"NpfXwxWAxo",now:"_2zD7drviYH",error:"_2bylJNYYdN",proxyType:"_1rVl-Kdmss",row:"aS2noEcBcP",proxyName:"_3kdi5nima5",proxySmall:"_3NpxWygDxO"}},L5YO:function(e,t,a){e.exports={topBar:"_39uWX_-wQq",group:"_1myfcMimT9",spining:"_1XIny-LIur",spining_keyframes:"_32AOtkypom"}},RL2M:function(e,t,a){e.exports={header:"_37wt2_a2Gx",arrow:"L80zPM0Rx0",isOpen:"_36RO7_wtuv",btn:"_2XKN3NArpV",qty:"_1s98xvUoBx"}},RbL9:function(e,t,a){e.exports={proxyLatency:"_2V-RqIAl7n"}},UVHL:function(e,t,a){e.exports={select:"t6lsDKNXTK"}},UmKA:function(e,t,a){e.exports={overlay:"_2OKIZuCJtW",cnt:"_1y6NeshM4O",afterOpen:"_25KARE4UsT"}},wyCT:function(e,t,a){"use strict";a.r(t);a("2B1R");var n=a("ODXe"),r=a("q1tI"),c=a.n(r),l=a("WfPo"),o=a("n57c"),i=a("DKqX"),s=(a("TeQF"),a("ToJy"),a("KQm4")),u=a("iuhU"),m=a("Wwog"),p=a("HGr0"),f=a("OADI"),d=a("j7o3"),v=a("riol"),b=a("RL2M"),y=a.n(b);function E(e){var t=e.name,a=e.type,n=e.toggle,r=e.isOpen,l=e.qty;return c.a.createElement("div",{className:y.a.header},c.a.createElement("div",{onClick:n,style:{cursor:"pointer"}},c.a.createElement(v.b,{name:t,type:a})),"number"==typeof l?c.a.createElement("span",{className:y.a.qty},l):null,c.a.createElement(o.a,{kind:"minimal",onClick:n,className:y.a.btn},c.a.createElement("span",{className:Object(u.a)(y.a.arrow,{[y.a.isOpen]:r})},c.a.createElement(d.a,{size:20}))))}var O=a("RbL9"),h=a.n(O);function x(e){var t=e.number,a=e.color;return c.a.createElement("span",{className:h.a.proxyLatency,style:{color:a}},c.a.createElement("span",null,t," ms"))}var g=a("FWZb"),j=a.n(g),w=c.a.useMemo,N="#67c23a",C="#d4b75c",k="#e67f3c",A="#909399";function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.number;return t<200?N:t<400?C:"number"==typeof t?k:A}var L=function(e,t){var a=t.name,n=Object(p.c)(e),r=Object(p.b)(e);return{proxy:n[a],latency:r[a]}},R=Object(l.a)(L)((function(e){var t=e.now,a=e.name,n=e.proxy,r=e.latency,l=w((function(){return _(r)}),[r]);return c.a.createElement("div",{className:Object(u.a)(j.a.proxy,{[j.a.now]:t,[j.a.error]:r&&r.error})},c.a.createElement("div",{className:j.a.proxyName},a),c.a.createElement("div",{className:j.a.row},c.a.createElement("span",{className:j.a.proxyType,style:{opacity:t?.6:.2}},n.type),r&&r.number?c.a.createElement(x,{number:r.number,color:l}):null))})),S=Object(l.a)(L)((function(e){var t=e.now,a=e.name,n=e.latency,r=w((function(){return _(n)}),[n]),l=w((function(){var e=a;return n&&"number"==typeof n.number&&(e+=" "+n.number+" ms"),e}),[a,n]);return c.a.createElement("div",{title:l,className:Object(u.a)(j.a.proxySmall,{[j.a.now]:t}),style:{backgroundColor:r}})})),D=a("D46e"),P=a.n(D),T=c.a.useCallback,B=c.a.useMemo;function M(e){var t=e.all,a=e.now,n=e.isSelectable,r=e.itemOnTapCallback,l=e.sortedAll||t;return c.a.createElement("div",{className:P.a.list},l.map((function(e){var t=Object(u.a)(P.a.proxy,{[P.a.proxySelectable]:n});return c.a.createElement("div",{className:t,key:e,onClick:function(){n&&r&&r(e)}},c.a.createElement(R,{name:e,now:e===a}))})))}var U=function(e,t){return void 0===e?0:!e.error&&e.number>0?e.number:t};var I={Natural:function(e,t){return e},LatencyAsc:function(e,t){return e.sort((function(e,a){return U(t[e],999999)-U(t[a],999999)}))},LatencyDesc:function(e,t){return e.sort((function(e,a){var n=U(t[e],999999);return U(t[a],999999)-n}))},NameAsc:function(e){return e.sort()},NameDesc:function(e){return e.sort((function(e,t){return e>t?-1:e<t?1:0}))}};var K=Object(m.a)((function(e,t,a,n){var r=Object(s.a)(e);return a&&(r=function(e,t){return e.filter((function(e){var a=t[e];return void 0===a||!a.error&&0!==a.number}))}(e,t)),I[n](r,t)}));function q(e){var t=e.all,a=e.now,n=e.isSelectable,r=e.itemOnTapCallback;return c.a.createElement("div",{className:P.a.list},t.map((function(e){var t=Object(u.a)(P.a.proxy,{[P.a.proxySelectable]:n});return c.a.createElement("div",{className:t,key:e,onClick:function(){n&&r&&r(e)}},c.a.createElement(S,{name:e,now:e===a}))})))}var H=Object(l.a)((function(e,t){var a=t.name,n=t.delay,r=Object(p.c)(e),c=Object(f.c)(e),l=Object(f.f)(e),o=Object(f.d)(e),i=r[a],s=i.all,u=i.type,m=i.now;return{all:K(s,n,o,l),type:u,now:m,isOpen:c["proxyGroup:"+a]}}))((function(e){var t=e.name,a=e.all,n=e.type,r=e.now,o=e.isOpen,i=e.apiConfig,s=e.dispatch,u=B((function(){return"Selector"===n}),[n]),m=Object(l.c)().app.updateCollapsibleIsOpen,f=T((function(){m("proxyGroup",t,!o)}),[o,m,t]),d=T((function(e){u&&s(Object(p.i)(i,t,e))}),[i,s,t,u]);return c.a.createElement("div",{className:P.a.group},c.a.createElement(E,{name:t,type:n,toggle:f,qty:a.length,isOpen:o}),o?c.a.createElement(M,{all:a,now:r,isSelectable:u,itemOnTapCallback:d}):c.a.createElement(q,{all:a}))})),F=a("9rZX"),Z=a.n(F),z=a("Z9Yo"),W=a.n(z),X=a("UmKA"),V=a.n(X),Y=r.useMemo;function J(e){var t=e.isOpen,a=e.onRequestClose,n=e.children,c=Y((function(){return{base:Object(u.a)(W.a.content,V.a.cnt),afterOpen:V.a.afterOpen,beforeClose:""}}),[]);return r.createElement(Z.a,{isOpen:t,onRequestClose:a,className:c,overlayClassName:Object(u.a)(W.a.overlay,V.a.overlay)},n)}var G=a("hkBY"),Q=a("mrSG"),$=a("UVHL"),ee=a.n($);function te(e){var t=e.options,a=e.selected,n=e.onChange;return r.createElement("select",{className:ee.a.select,value:a,onChange:n},t.map((function(e){var t=Object(Q.c)(e,2),a=t[0],n=t[1];return r.createElement("option",{key:a,value:a},n)})))}var ae=a("5JRb"),ne=a.n(ae),re=[["Natural","Original order in config file"],["LatencyAsc","By latency from small to big"],["LatencyDesc","By latency from big to small"],["NameAsc","By name alphabetically (A-Z)"],["NameDesc","By name alphabetically (Z-A)"]],ce=r.useCallback;var le=Object(l.a)((function(e){return{appConfig:{proxySortBy:Object(f.f)(e),hideUnavailableProxies:Object(f.d)(e)}}}))((function(e){var t=e.appConfig,a=Object(l.c)().app.updateAppConfig,n=ce((function(e){a("proxySortBy",e.target.value)}),[a]),c=ce((function(e){a("hideUnavailableProxies",e)}),[a]);return r.createElement(r.Fragment,null,r.createElement("div",{className:ne.a.labeledInput},r.createElement("span",null,"Sorting in group"),r.createElement("div",null,r.createElement(te,{options:re,selected:t.proxySortBy,onChange:n}))),r.createElement("hr",null),r.createElement("div",{className:ne.a.labeledInput},r.createElement("span",null,"Hide unavailable proxies"),r.createElement("div",null,r.createElement(G.a,{name:"hideUnavailableProxies",checked:t.hideUnavailableProxies,onChange:c}))))}));function oe(e){var t=e.color,a=void 0===t?"currentColor":t,n=e.size,c=void 0===n?24:n;return r.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:c,height:c,stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M2 6h9M18.5 6H22"}),r.createElement("circle",{cx:"16",cy:"6",r:"2"}),r.createElement("path",{d:"M22 18h-9M6 18H2"}),r.createElement("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"}))}var ie=a("ySHw"),se=a("o0o1"),ue=a.n(se),me=(a("ls82"),a("HaE+")),pe=a("OAQO"),fe=a("FVam"),de=a("ZMKu"),ve=a("bdgK"),be=c.a.memo,ye=c.a.useState,Ee=c.a.useRef,Oe=c.a.useEffect;var he={initialOpen:{height:"auto",transition:{duration:0}},open:function(e){return{height:e,opacity:1,visibility:"visible",transition:{duration:.3}}},closed:{height:0,opacity:0,visibility:"hidden",transition:{duration:.3}}},xe={open:{x:0},closed:{x:20}},ge=be((function(e){var t,a,r=e.children,l=e.isOpen,o=(t=l,a=Ee(),Oe((function(){a.current=t}),[t]),a.current),i=function(){var e=Ee(),t=ye({height:0}),a=Object(n.a)(t,2),r=a[0],c=a[1];return Oe((function(){var t=new ve.a((function(e){var t=Object(n.a)(e,1)[0];return c(t.contentRect)}));return e.current&&t.observe(e.current),function(){return t.disconnect()}}),[]),[e,r]}(),s=Object(n.a)(i,2),u=s[0],m=s[1].height;return c.a.createElement("div",null,c.a.createElement(de.a.div,{animate:l&&o===l?"initialOpen":l?"open":"closed",custom:m,variants:he},c.a.createElement(de.a.div,{variants:xe,ref:u},r)))})),je=a("x5hA"),we=a.n(je),Ne=c.a.useState,Ce=c.a.useCallback;var ke={rest:{scale:1},pressed:{scale:.95}},Ae={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function _e(){return c.a.createElement(de.a.div,{className:we.a.refresh,variants:ke,initial:"rest",whileHover:"hover",whileTap:"pressed"},c.a.createElement(de.a.div,{className:"flexCenter",variants:Ae},c.a.createElement(pe.a,{size:16})))}var Le=Object(l.a)((function(e,t){var a=t.proxies,n=t.name,r=Object(f.d)(e),c=Object(p.b)(e),l=Object(f.c)(e),o=Object(f.b)(e),i=Object(f.f)(e);return{apiConfig:o,proxies:K(a,c,r,i),isOpen:l["proxyProvider:"+n]}}))((function(e){var t=e.name,a=e.proxies,r=e.vehicleType,i=e.updatedAt,s=e.isOpen,u=e.dispatch,m=e.apiConfig,f=Ne(!1),d=Object(n.a)(f,2),v=d[0],b=d[1],y=Ce((function(){return u(Object(p.j)(m,t))}),[m,u,t]),O=Ce(Object(me.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,u(Object(p.f)(m,t));case 3:b(!1);case 4:case"end":return e.stop()}}),e)}))),[m,u,t,b]),h=Object(l.c)().app.updateCollapsibleIsOpen,x=Ce((function(){h("proxyProvider",t,!s)}),[s,h,t]),g=Object(fe.a)(new Date(i),new Date);return c.a.createElement("div",{className:we.a.body},c.a.createElement(E,{name:t,toggle:x,type:r,isOpen:s,qty:a.length}),c.a.createElement("div",{className:we.a.updatedAt},c.a.createElement("small",null,"Updated ",g," ago")),c.a.createElement(ge,{isOpen:s},c.a.createElement(M,{all:a}),c.a.createElement("div",{className:we.a.actionFooter},c.a.createElement(o.a,{text:"Update",start:c.a.createElement(_e,null),onClick:y}),c.a.createElement(o.a,{text:"Health Check",start:c.a.createElement(ie.a,{size:16}),onClick:O,isLoading:v}))),c.a.createElement(ge,{isOpen:!s},c.a.createElement(q,{all:a})))}));var Re=function(e){var t=e.items;return 0===t.length?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{title:"Proxy Provider"}),c.a.createElement("div",null,t.map((function(e){return c.a.createElement(Le,{key:e.name,name:e.name,proxies:e.proxies,type:e.type,vehicleType:e.vehicleType,updatedAt:e.updatedAt})}))))},Se=a("9cvt"),De=a("L5YO"),Pe=a.n(De),Te=c.a.useState,Be=c.a.useEffect,Me=c.a.useCallback,Ue=c.a.useRef;function Ie(){return c.a.createElement("div",{className:Pe.a.spining,style:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(ie.a,{width:16,height:16}))}t.default=Object(l.a)((function(e){return{apiConfig:Object(f.b)(e),groupNames:Object(p.d)(e),proxyProviders:Object(p.e)(e),delay:Object(p.b)(e)}}))((function(e){var t=e.dispatch,a=e.groupNames,r=e.delay,l=e.proxyProviders,s=e.apiConfig,u=Ue({}),m=Te(!1),f=Object(n.a)(m,2),d=f[0],v=f[1],b=Me((function(){d||(v(!0),t(Object(p.h)(s)).then((function(){return v(!1)}),(function(){return v(!1)})))}),[s,t,d]),y=Me((function(){u.current.startAt=new Date,t(Object(p.a)(s)).then((function(){u.current.completeAt=new Date}))}),[s,t]);Be((function(){y();var e=function(){u.current.startAt&&new Date-u.current.startAt>3e4&&y()};return window.addEventListener("focus",e,!1),function(){return window.removeEventListener("focus",e,!1)}}),[y]);var E=Te(!1),O=Object(n.a)(E,2),h=O[0],x=O[1],g=Me((function(){x(!1)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Pe.a.topBar},c.a.createElement(o.a,{kind:"minimal",onClick:function(){return x(!0)}},c.a.createElement(oe,{size:16}))),c.a.createElement(J,{isOpen:h,onRequestClose:g},c.a.createElement(le,null)),c.a.createElement(i.a,{title:"Proxies"}),c.a.createElement("div",null,a.map((function(e){return c.a.createElement("div",{className:Pe.a.group,key:e},c.a.createElement(H,{name:e,delay:r,apiConfig:s,dispatch:t}))}))),c.a.createElement(Re,{items:l}),c.a.createElement("div",{style:{height:60}}),c.a.createElement(Se.b,{icon:d?c.a.createElement(Ie,null):c.a.createElement(ie.a,{width:16,height:16}),onClick:b,text:"Test Latency",position:Se.c}))}))},x5hA:function(e,t,a){e.exports={updatedAt:"_3GVE9k27aM",body:"_1PV2l5z2zN",actionFooter:"_1b5XrAhEUm",refresh:"_2t6Q6BkZ73"}}}]);